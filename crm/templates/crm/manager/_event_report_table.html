{% load django_tables2 i18n html_helper humanize %}
{% block table-wrapper %}
  <table class="table table-hover">
  {% block table.thead %}
    {% if table.show_header %}
      <thead class="d-none d-md-block" {{ table.attrs.thead.as_html }}>
      <tr>
        {% for column in table.columns %}
          <th {{ column.attrs.th.as_html }}>
            {% if column.orderable %}
              <a
                href="{% querystring table.prefixed_order_by_field=column.order_by_alias.next %}">{{ column.header }}</a>
            {% else %}
              {{ column.header }}
            {% endif %}
          </th>
        {% endfor %}
      </tr>
      </thead>
    {% endif %}
  {% endblock table.thead %}
  {% block table.tbody %}
    <tbody {{ table.attrs.tbody.as_html }}>
    {% for row in table.paginated_rows %}
      {% block table.tbody.row %}
        <tr>
          <td>
            <div class="d-none d-md-block">
              {{ row.cells.date }}
            </div>
            <div class="d-block d-md-none">
              <small> {{ row.cells.date }}</small>
              <br>
              <small>{{ row.cells.coach }}</small>
              <br>
              <small>{{ row.cells.event_class }}</small>
            </div>
          </td>
          <td class="d-none d-md-block">
            {{ row.cells.coach }}
          </td>
          <td class="d-none d-md-block">
            {{ row.cells.event_class }}
          </td>
          <td>
            <div class="d-none d-md-block">
              {{ row.cells.clients_count }}
            </div>
            <div class="d-block d-md-none">
              <small>Ученики:{{ row.cells.clients_count }}</small>
              <br>
              <small>По разовому абонементу: {{ row.cells.clients_count_one_time }}</small>
              <br>
              <small>Продано абонементов: {{ row.cells.subs_sales }}</small>
            </div>
          </td>
          <td class="d-none d-md-block">
            {{ row.cells.clients_count_one_time }}
          </td>
          <td class="d-none d-md-block">
            {{ row.cells.subs_sales }}
          </td>
          <td>
            {{ row.cells.profit|floatformat:"-2"|intcomma }}&nbsp;₽
          </td>
        </tr>
      {% endblock table.tbody.row %}
    {% empty %}
      {% if table.empty_text %}
        {% block table.tbody.empty_text %}
          <tr>
            <td colspan="{{ table.columns|length }}">{{ table.empty_text }}</td>
          </tr>
        {% endblock table.tbody.empty_text %}
      {% endif %}
    {% endfor %}
    </tbody>
  {% endblock table.tbody %}
  <tbody>
{% endblock %}
