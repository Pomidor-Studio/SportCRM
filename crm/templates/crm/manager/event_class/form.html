{% extends "crm/base_design.html" %}

{% load bootstrap4 html_helper l10n %}

{% block title %}Группа{% endblock %}
{% block sidbar %}
  {% include 'crm/bars/_sidebar_design.html'  with name="Группы" back_link=False current='groups' %}
  {% comment %}
  {% url 'crm:manager:event-class:list' as back_link %}
  {% include 'crm/bars/_sidebar_design.html'  with name="Расписание" back_link=back_link current='event' %}
  {% endcomment %}

{% endblock %}


{% block content %}
  <div class="page new_class col-md-12 col-lg-9 col-xl-10">
    <div class="row">
      <div class="col-12 alert-box">
        {% if messages %}
          {% for message in messages %}
            {% bootstrap_alert_message message %}
          {% endfor %}
        {% endif %}
      </div>
    </div>
    <div class="bredcams clearfix">
      <ul>
        <li>
          <a href="{% url 'crm:manager:event:calendar' %}">Расписание</a>
          <svg width="7" height="11" viewBox="0 0 7 11" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 1L5.5 5.5L1 10" stroke="#C4C4C4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
          </svg>
        </li>
        <li>
          {% if object %}
          {{ object.name }}
          {% else %}
          Новая
          {% endif %}
        </li>
      </ul>
    </div>
    <div class="greyline"></div>

    <div class="messages"></div>

    {% csrf_token %}

    <div class="form-group row">
      <div class="col-12 col-md-10 col-xl-6">
        <label for="id_name">Наименование</label>
        <input type="text" name="name" maxlength="100" class="form-control" placeholder="Наименование" title="" required id="id_name" value="{% if object %}{{ object.name }}{% endif %}">
      </div>
    </div>
    <div class="form-group select row">
      <div class="col-12 col-md-10 col-xl-6">
        <label for="id_location">Площадка</label>
        <select name="location" class="selectpicker form-control" id="id_location">
          <option data-hidden="true">Выбрать площадку</option>
          {% for location in locations %}
            <option value="{{ location.id }}" {% if object and object.location_id == location.id%}selected{% endif %}>{{ location.name }}</option>
          {% endfor %}
  			</select>
      </div>
    </div>
    <div class="form-group select row">
      <div class="col-12 col-md-10 col-xl-6">
        <label for="id_coach">Тренер</label>
        <select name="coach" class="selectpicker form-control" id="id_coach">
          <option data-hidden="true">Выбрать тренера</option>
          {% for coach in coaches %}
            <option value="{{ coach.id }}" {% if object and object.coach_id == coach.id %}selected{% endif %}>{{ coach }}</option>
          {% endfor %}
  			</select>
      </div>
    </div>
    <div class="row">
      <div class="col-12 col-sm-6 col-md-3">
        <div class="form-group"><label for="id_one_time_price">Стоимость посещения</label><input type="number" name="one_time_price" placeholder="" min="0" class="form-control" title="" id="id_one_time_price" value="{% if object and one_time_price %}{{ one_time_price|unlocalize }}{% endif %}"></div>
      </div>
      <div class="col-12 col-sm-6 col-md-3">
        <div class="form-group"><label for="id_planned_attendance">Плановая посещаемость</label><input type="number" name="planned_attendance" placeholder="" min="0" class="form-control" title="" id="id_planned_attendance" value="{% if object and object.planned_attendance %}{{ object.planned_attendance }}{% endif %}"></div>
      </div>
    </div>
    <div class="form-group save_buttons">
      <button id="save-gr" class="btn btn-primary">Сохранить</button>
      <a id="cancel" class="btn" href="{% url 'crm:manager:event-class:list' %}">Отмена</a>
    </div>


    <div class="greyline"></div>

    {% if object %}
      <div class="row addNewSection">
        <div class="new_event col-12 col-md-10 col-xl-6">
          <a href="#" id="addNewEvent" class="btn btn-primary w-100">Добавить</a>
        </div>
      </div>
      <div class="newEventForm" class="col-12">
        <div class="new_event_info">
          <ul class="nav nav-pills row no-gutters" role="tablist">
            <li class="nav-item">
              <a class="nav-link active" id="one-tab-new" data-toggle="tab" href="#one-new" role="tab">Разовая</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" id="many-tab-new" data-toggle="tab" data-many href="#many-new" role="tab">По расписанию</a>
            </li>
          </ul>
          <div class="greyline"></div>
          <div class="tab-content">
            <!-- Новая тренировка Разовая -->
            <div class="tab-pane fade show active" id="one-new">
              <form>
                <div class="form-group row">
                  <div class="col-12 col-md-4 col-xl-2 datepick">
                    <div class="form-group">
                      <label for="id_date_from_single_new">День тренировки</label>
                      <input
                          type="text"
                          name="date_from_single_new"
                          placeholder=""
                          class="form-control"
                          data-datepicker
                          title=""
                          required
                          id="id_date_from_single_new"
                         >
                    </div>
                  </div>
                  <div class="col-6 col-md-3 col-xl-2 timepick">
                    <div class="form-group">
                      <label for="id_start_time_single_<%: uid %>">Начало</label>
                      <input
                          type="text"
                          name="start_time_single_<%: uid %>"
                          class="form-control time"
                          data-timepicker
                          data-from-timer
                          data-uid="<%: uid %>"
                          placeholder=":"
                          title=""
                          required
                          id="id_start_time_single_new"
                      >
                      </div>
                  </div>
                  <div class="col-6 col-md-3 col-xl-2 timepick">
                    <div class="form-group">
                    <label for="id_end_time_single_new">Окончание</label>
                    <input
                      type="text"
                      name="end_time_single"
                      class="form-control time"
                      data-timepicker
                      placeholder=":"
                      title=""
                      required
                      id="id_end_time_single_new"
                    >
                    </div>
                  </div>
                </div>
                <div class="form-group save_buttons">
                  <button id="save-ec" class="btn btn-primary">Добавить</button>
                  <a class="btn cancel_new" href="#">Отмена</a>
                </div>
              </form>
            </div>
            <!-- Новая тренировка по расписанию -->
            <div class="tab-pane fade" id="many-new">
              <form>
                <div class="row">
                  <div class="form-group datepick col-12 col-sm-6 col-md-3">
                    <div class="form-group">
                      <label for="id_date_from_<%: uid %>">Начало тренировок</label>
                      <input
                          type="text"
                          name="date_from_new"
                          placeholder=""
                          data-datepicker
                          class="form-control"
                          title=""
                          id="id_date_from_new"
                      >
                    </div>
                  </div>
                  <div class="form-group datepick col-12 col-sm-6 col-md-3">
                    <div class="form-group">
                      <label for="id_date_to_<%: uid %>">Окончание тренировок</label>
                      <input
                          type="text"
                          name="date_to_new"
                          placeholder=""
                          data-datepicker
                          class="form-control"
                          title=""
                          id="id_date_to_new"
                      >
                    </div>
                  </div>
                </div>
                <div class="form-group row days timepick">
                  <!-- Понедельник -->
                  <div class="col-6 col-md-3 col-lg day">
                    <div class="form-check">
                      <input type="checkbox" name="weekday-1-checked-new" class="form-check-input day-of-week">
                      <div class="form-check-input-div"></div>
                      <label class="form-check-label" for="id_weekday_1_checked_new">Понедельник</label>
                    </div>
                    <div>
                      <label class="sr-only" for="id_weekday_1_start_time_new">Время начала тренировки</label>
                      <input type="text" name="weekday_1_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_1_start_time_new">
                    </div>
                    —
                    <div>
                      <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
                      <input type="text" name="weekday_1_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_1_end_time_new">
                    </div>
                  </div>
                  <!-- Вторник -->
                  <div class="col-6 col-md-3 col-lg day">
                    <div class="form-check">
                      <input type="checkbox" name="weekday-2-checked-new" class="form-check-input day-of-week">
                      <div class="form-check-input-div"></div>
                      <label class="form-check-label" for="id_weekday_2_checked_new">Вторник</label>
                    </div>
                    <div>
                      <label class="sr-only" for="id_weekday_2_start_time_new">Время начала тренировки</label>
                      <input type="text" name="weekday_2_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_2_start_time_new">
                    </div>
                    —
                    <div>
                      <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
                      <input type="text" name="weekday_2_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_2_end_time_new">
                    </div>
                  </div>
                  <!-- Среда -->
                  <div class="col-6 col-md-3 col-lg day">
                    <div class="form-check">
                      <input type="checkbox" name="weekday-3-checked-new" class="form-check-input day-of-week">
                      <div class="form-check-input-div"></div>
                      <label class="form-check-label" for="id_weekday_3_checked_new">Среда</label>
                    </div>
                    <div>
                      <label class="sr-only" for="id_weekday_3_start_time_new">Время начала тренировки</label>
                      <input type="text" name="weekday_3_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_3_start_time_new">
                    </div>
                    —
                    <div>
                      <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
                      <input type="text" name="weekday_3_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_3_end_time_new">
                    </div>
                  </div>
                  <!-- Четверг -->
                  <div class="col-6 col-md-3 col-lg day">
                    <div class="form-check">
                      <input type="checkbox" name="weekday-4-checked-new" class="form-check-input day-of-week">
                      <div class="form-check-input-div"></div>
                      <label class="form-check-label" for="id_weekday_4_checked_new">Вторник</label>
                    </div>
                    <div>
                      <label class="sr-only" for="id_weekday_4_start_time_new">Время начала тренировки</label>
                      <input type="text" name="weekday_4_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_4_start_time_new">
                    </div>
                    —
                    <div>
                      <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
                      <input type="text" name="weekday_4_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_4_end_time_new">
                    </div>
                  </div>
                  <!-- Пятница -->
                  <div class="col-6 col-md-3 col-lg day">
                    <div class="form-check">
                      <input type="checkbox" name="weekday-5-checked-new" class="form-check-input day-of-week">
                      <div class="form-check-input-div"></div>
                      <label class="form-check-label" for="id_weekday_5_checked_new">Вторник</label>
                    </div>
                    <div>
                      <label class="sr-only" for="id_weekday_5_start_time_new">Время начала тренировки</label>
                      <input type="text" name="weekday_5_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_5_start_time_new">
                    </div>
                    —
                    <div>
                      <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
                      <input type="text" name="weekday_6_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_5_end_time_new">
                    </div>
                  </div>
                  <!-- Суббота -->
                  <div class="col-6 col-md-3 col-lg day">
                    <div class="form-check">
                      <input type="checkbox" name="weekday-6-checked-new" class="form-check-input day-of-week">
                      <div class="form-check-input-div"></div>
                      <label class="form-check-label" for="id_weekday_6_checked_new">Вторник</label>
                    </div>
                    <div>
                      <label class="sr-only" for="id_weekday_6_start_time_new">Время начала тренировки</label>
                      <input type="text" name="weekday_6_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_6_start_time_new">
                    </div>
                    —
                    <div>
                      <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
                      <input type="text" name="weekday_6_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_6_end_time_new">
                    </div>
                  </div>
                  <!-- Воскресенье -->
                  <div class="col-6 col-md-3 col-lg day">
                    <div class="form-check">
                      <input type="checkbox" name="weekday-7-checked-new" class="form-check-input day-of-week">
                      <div class="form-check-input-div"></div>
                      <label class="form-check-label" for="id_weekday_7_checked_new">Воскресенье</label>
                    </div>
                    <div>
                      <label class="sr-only" for="id_weekday_7_start_time_new">Время начала тренировки</label>
                      <input type="text" name="weekday_7_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_7_start_time_new">
                    </div>
                    —
                    <div>
                      <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
                      <input type="text" name="weekday_7_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_7_end_time_new">
                    </div>
                  </div>
                </div>
                <div class="form-group save_buttons">
                  <button id="save-ec" class="btn btn-primary">Добавить</button>
                  <a class="btn cancel_new" href="#">Отмена</a>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    {% else %}
      <p>После создания группы, вы сможете завести в расписание новые тренировки.</p>
    {% endif %}








    <!-- Расписание разовой -->
    <div class="row">
      <div class="event col-12 col-md-10 col-xl-6">
        <a href="#" data-uid="<%: uid %>" class="btn btn-outline-primary w-100 show-event">
          Тренировка: <b>20.08.2019</b> <span>(11:00 - 12:00)</span>
        </a>
      </div>
    </div>
    <div class="event_info">
      <div class="greyline"></div>
      <form>
        <div class="form-group row">
          <div class="col-12 col-md-4 col-xl-2 datepick">
            <div class="form-group">
              <label for="id_date_from_single_1">День тренировки</label>
              <input
                  type="text"
                  name="date_from_single_new"
                  placeholder=""
                  class="form-control"
                  data-datepicker
                  title=""
                  required
                  id="id_date_from_single_new"
                  value="20.08.2019"
                 >
            </div>
          </div>
          <div class="col-6 col-md-3 col-xl-2 timepick">
            <div class="form-group">
              <label for="id_start_time_single_<%: uid %>">Начало</label>
              <input
                  type="text"
                  name="start_time_single_<%: uid %>"
                  class="form-control time"
                  data-timepicker
                  data-from-timer
                  data-uid="<%: uid %>"
                  placeholder=":"
                  title=""
                  required
                  id="id_start_time_single_1"
                  value="11:00"
              >
              </div>
          </div>
          <div class="col-6 col-md-3 col-xl-2 timepick">
            <div class="form-group">
            <label for="id_end_time_single_1">Окончание</label>
            <input
              type="text"
              name="end_time_single"
              class="form-control time"
              data-timepicker
              placeholder=":"
              title=""
              required
              id="id_end_time_single_1"
              value="12:00"
            >
            </div>
          </div>
        </div>
        <div class="form-group">
          <a class="btn cancel" href="#">Закрыть</a>
        </div>
      </form>
      <div class="greyline"></div>
    </div>






    <!-- Расписание -->
    <div class="row">
      <div class="event col-12 col-md-10 col-xl-6">
        <a href="#" data-uid="<%: uid %>" class="btn btn-outline-primary w-100 show-event">
          Тренировки: <b>22.06.2019 - 31.08.2019</b> <span>(пн, ср, пт)</span>
        </a>
      </div>
    </div>
    <div class="event_info">
      <div class="greyline"></div>
      <form>
        <div class="row">
          <div class="form-group datepick col-12 col-sm-6 col-md-3">
            <div class="form-group">
              <label for="id_date_from_<%: uid %>">Начало тренировок</label>
              <input
                  type="text"
                  name="date_from_new"
                  placeholder=""
                  data-datepicker
                  class="form-control"
                  title=""
                  id="id_date_from_new"
              >
            </div>
          </div>
          <div class="form-group datepick col-12 col-sm-6 col-md-3">
            <div class="form-group">
              <label for="id_date_to_<%: uid %>">Окончание тренировок</label>
              <input
                  type="text"
                  name="date_to_new"
                  placeholder=""
                  data-datepicker
                  class="form-control"
                  title=""
                  id="id_date_to_new"
              >
            </div>
          </div>
        </div>
        <div class="form-group row days timepick">
          <!-- Понедельник -->
          <div class="col-6 col-md-3 col-lg day">
            <div class="form-check">
              <input type="checkbox" name="weekday-1-checked-new" class="form-check-input day-of-week">
              <div class="form-check-input-div"></div>
              <label class="form-check-label" for="id_weekday_1_checked_new">Понедельник</label>
            </div>
            <div>
              <label class="sr-only" for="id_weekday_1_start_time_new">Время начала тренировки</label>
              <input type="text" name="weekday_1_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_1_start_time_new">
            </div>
            —
            <div>
              <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
              <input type="text" name="weekday_1_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_1_end_time_new">
            </div>
          </div>
          <!-- Вторник -->
          <div class="col-6 col-md-3 col-lg day">
            <div class="form-check">
              <input type="checkbox" name="weekday-2-checked-new" class="form-check-input day-of-week">
              <div class="form-check-input-div"></div>
              <label class="form-check-label" for="id_weekday_2_checked_new">Вторник</label>
            </div>
            <div>
              <label class="sr-only" for="id_weekday_2_start_time_new">Время начала тренировки</label>
              <input type="text" name="weekday_2_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_2_start_time_new">
            </div>
            —
            <div>
              <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
              <input type="text" name="weekday_2_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_2_end_time_new">
            </div>
          </div>
          <!-- Среда -->
          <div class="col-6 col-md-3 col-lg day">
            <div class="form-check">
              <input type="checkbox" name="weekday-3-checked-new" class="form-check-input day-of-week">
              <div class="form-check-input-div"></div>
              <label class="form-check-label" for="id_weekday_3_checked_new">Среда</label>
            </div>
            <div>
              <label class="sr-only" for="id_weekday_3_start_time_new">Время начала тренировки</label>
              <input type="text" name="weekday_3_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_3_start_time_new">
            </div>
            —
            <div>
              <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
              <input type="text" name="weekday_3_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_3_end_time_new">
            </div>
          </div>
          <!-- Четверг -->
          <div class="col-6 col-md-3 col-lg day">
            <div class="form-check">
              <input type="checkbox" name="weekday-4-checked-new" class="form-check-input day-of-week">
              <div class="form-check-input-div"></div>
              <label class="form-check-label" for="id_weekday_4_checked_new">Вторник</label>
            </div>
            <div>
              <label class="sr-only" for="id_weekday_4_start_time_new">Время начала тренировки</label>
              <input type="text" name="weekday_4_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_4_start_time_new">
            </div>
            —
            <div>
              <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
              <input type="text" name="weekday_4_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_4_end_time_new">
            </div>
          </div>
          <!-- Пятница -->
          <div class="col-6 col-md-3 col-lg day">
            <div class="form-check">
              <input type="checkbox" name="weekday-5-checked-new" class="form-check-input day-of-week">
              <div class="form-check-input-div"></div>
              <label class="form-check-label" for="id_weekday_5_checked_new">Вторник</label>
            </div>
            <div>
              <label class="sr-only" for="id_weekday_5_start_time_new">Время начала тренировки</label>
              <input type="text" name="weekday_5_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_5_start_time_new">
            </div>
            —
            <div>
              <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
              <input type="text" name="weekday_6_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_5_end_time_new">
            </div>
          </div>
          <!-- Суббота -->
          <div class="col-6 col-md-3 col-lg day">
            <div class="form-check">
              <input type="checkbox" name="weekday-6-checked-new" class="form-check-input day-of-week">
              <div class="form-check-input-div"></div>
              <label class="form-check-label" for="id_weekday_6_checked_new">Вторник</label>
            </div>
            <div>
              <label class="sr-only" for="id_weekday_6_start_time_new">Время начала тренировки</label>
              <input type="text" name="weekday_6_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_6_start_time_new">
            </div>
            —
            <div>
              <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
              <input type="text" name="weekday_6_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_6_end_time_new">
            </div>
          </div>
          <!-- Воскресенье -->
          <div class="col-6 col-md-3 col-lg day">
            <div class="form-check">
              <input type="checkbox" name="weekday-7-checked-new" class="form-check-input day-of-week">
              <div class="form-check-input-div"></div>
              <label class="form-check-label" for="id_weekday_7_checked_new">Воскресенье</label>
            </div>
            <div>
              <label class="sr-only" for="id_weekday_7_start_time_new">Время начала тренировки</label>
              <input type="text" name="weekday_7_start_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_7_start_time_new">
            </div>
            —
            <div>
              <label class="sr-only" for="id_weekday_<%: num %>_end_time_<%:~uid %>">Время окнчания тренировки</label>
              <input type="text" name="weekday_7_end_time_new" class="form-control time" data-timepicker placeholder=":" disabled title="" id="id_weekday_7_end_time_new">
            </div>
          </div>
        </div>
        <div class="form-group save_buttons">
          <a class="btn cancel" href="#">Отмена</a>
        </div>
      </form>
      <div class="greyline"></div>
    </div>








    <!-- Расписание неактивное -->
    <div class="row">
        <div class="event col-12 col-md-10 col-xl-6">
          <a class="btn btn-outline-secondary w-100 show-event">
            Тренировка: <b>30.06.2019</b> <span>(16:00 -17:30)</span>
          </a>
        </div>
    </div>


























  </div>

{% endblock content %}

{% block extrajs %}
<script type="text/javascript">

  enquire.register("screen and (max-width: 720px)", {
    match: function() {
      $('.selectpicker').attr('data-mobile', 'true');
    }
  });

  //Нажимаем добавить новое событие, отключаем сохранить для группы
  $('#addNewEvent').click(function() {
    $('#save-gr').attr('disabled','');
    $('.addNewSection').hide();
    $('.newEventForm').show();
  })
  $('.cancel_new').click(function() {
    $('#save-gr').removeAttr('disabled','');
    $('.addNewSection').show();
    $('.newEventForm').hide();
  })

  //Показываем активные расписания
  $('.event').click(function() {
    $(this).parent('.row').hide();
    $(this).parent('.row').next('.event_info').show();
  })
  $('.cancel').click(function() {
    $(this).parents('.event_info').prev('.row').show();
    $(this).parents('.event_info').hide();
  })

  //Датапикер
  $('input[data-datepicker]').toArray().forEach(function(field) {
    const $field = $(field);
    const options = {
      uiLibrary: 'bootstrap4',
      locale: 'ru-ru',
      format: 'dd.mm.yyyy',
      modal: false,
      icons: {
        rightIcon: '<svg width="10" height="11" viewBox="0 0 10 11" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M1 4H0V11H10V4H9V10H1V4Z" fill="#76818F"/><rect y="1" width="10" height="2" fill="#76818F"/><rect x="1" width="2" height="1" fill="#76818F"/><rect x="7" width="2" height="1" fill="#76818F"/></svg>'
      }
    };
    $field.datepicker(options);
  })

  //Время
  $('input[type="text"][data-timepicker]').toArray().forEach(function(field) {
    const options = {
      time: true,
      timePattern: ['h', 'm']
    };
    const $field = $(field);
    new Cleave(field, options);
  })

  //Дни недели в расписании
  $('div.new_class').on('click', 'div.day input[type=checkbox]', function() {
    const $this = $(this);
    const uid = parseInt($this.data('uid'));
    const day = parseInt($this.data('day'));
    $this.parents('.day')
        .find(':not([type=checkbox])')
        .prop('disabled', !this.checked);
  });
  $('.day:not(:first-child)').append("<div class=greylineV></div>");

</script>
{% endblock extrajs %}
