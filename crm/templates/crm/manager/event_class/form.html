{% extends "crm/base.html" %}

{% load bootstrap4 %}

{% block extrahead %}
  {{ eventclass_form.media }}
  {{ weekdays.media }}
  <script type="text/javascript">
    $(function () {
      $('#save-ec').click(function(e) {
        if ($('input:checkbox.day-of-week:checked').length === 0) {
          $('div.messages').append(
            '<div class="alert alert-danger alert-dismissible fade show" role="alert">\n' +
            '  Не выбрано ни одного дня проведения тренировки!\n' +
            '  <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n' +
            '    <span aria-hidden="true">&times;</span>\n' +
            '  </button>\n' +
            '</div>');
          window.scroll(0, 0);
          e.preventDefault();
        }
      });
    });
  </script>
{% endblock extrahead %}

{% block content %}
  <div class="container-fluid mt-4 ml-2">
    <legend class="border-bottom mb-2">Тренировка</legend>
    <div class="container-fluid">
      <form action="" method="POST">

        {% csrf_token %}

        {% bootstrap_form eventclass_form %}

        <div class="row">
          <div class="col-2">

          </div>
          <div class="col">
            Начало
          </div>
          <div class="col">
            Окончание
          </div>
        </div>
        <div class="row border-top">
          <div class="col-2 mt-1 mb-1">
            {% bootstrap_field weekdays.0.checked %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.0.start_time show_label=False %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.0.end_time show_label=False %}
          </div>
        </div>
        <div class="row border-top">
          <div class="col-2 mt-1 mb-1">
            {% bootstrap_field weekdays.1.checked %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.1.start_time show_label=False %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.1.end_time show_label=False %}
          </div>
        </div>
        <div class="row border-top">
          <div class="col-2 mt-1 mb-1">
            {% bootstrap_field weekdays.2.checked %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.2.start_time show_label=False %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.2.end_time show_label=False %}
          </div>
        </div>
        <div class="row border-top">
          <div class="col-2 mt-1 mb-1">
            {% bootstrap_field weekdays.3.checked %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.3.start_time show_label=False %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.3.end_time show_label=False %}
          </div>
        </div>
        <div class="row border-top">
          <div class="col-2 mt-1 mb-1">
            {% bootstrap_field weekdays.4.checked %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.4.start_time show_label=False %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.4.end_time show_label=False %}
          </div>
        </div>
        <div class="row border-top">
          <div class="col-2 mt-1 mb-1">
            {% bootstrap_field weekdays.5.checked %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.5.start_time show_label=False %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.5.end_time show_label=False %}
          </div>
        </div>
        <div class="row border-top">
          <div class="col-2 mt-1 mb-1">
            {% bootstrap_field weekdays.6.checked %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.6.start_time show_label=False %}
          </div>
          <div class="col mt-1 mb-1">
            {% bootstrap_field weekdays.6.end_time show_label=False %}
          </div>
        </div>

        <div class="row">
          <button
            id="save-ec" class="btn btn-primary mr-1"
            href="{% url 'crm:manager:event-class:list' %}" type="submit"
          >
            {% if object.id %}Сохранить{% else %}Добавить{% endif %}
          </button>
          <a
            name="cancel" href="{% url 'crm:manager:event-class:list' %}"
            class="btn btn-outline-info"
          >Назад</a>
        </div>
      </form>
    </div>
  </div>
{% endblock content %}
